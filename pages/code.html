<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Editor - Phantom</title>
    <link rel="icon" href="../favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../components/topbar.css">

    <!-- Load JSZip first (synchronous) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <link rel="stylesheet" href="../styles/code.css">
</head>

<body>
    <script src="../config.js"></script>
    <script src="../scripts/settings.js"></script>
    <script src="../scripts/notifications.js"></script>
    <script src="../components/topbar.js"></script>

    <div class="editor-page">
        <!-- Main Container -->
        <div class="editor-container">
            <!-- File Sidebar -->
            <div class="file-sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Explorer</span>
                    <div class="sidebar-actions">
                        <button class="sidebar-btn" id="new-file-btn" title="New File">
                            <i class="fa-solid fa-file-circle-plus"></i>
                        </button>
                        <button class="sidebar-btn" id="new-folder-btn" title="New Folder">
                            <i class="fa-solid fa-folder-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="file-tree" id="file-tree">
                    <div class="file-tree-empty">
                        <i class="fa-solid fa-folder-open"></i>
                        <span>Drag & drop files or folders here<br>or click + to create new</span>
                    </div>
                </div>
            </div>

            <!-- Main Editor -->
            <div class="editor-main">
                <!-- Toolbar -->
                <div class="editor-toolbar">
                    <div class="toolbar-left">
                        <button class="toolbar-btn success" id="fix-code-btn">
                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                            Fix Code
                        </button>
                        <button class="toolbar-btn" id="lint-btn">
                            <i class="fa-solid fa-bug"></i>
                            Check Errors
                        </button>
                        <select class="language-select" id="language-select">
                            <option value="javascript">JavaScript</option>
                            <option value="typescript">TypeScript</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="json">JSON</option>
                            <option value="python">Python</option>
                            <option value="markdown">Markdown</option>
                            <option value="plaintext">Plain Text</option>
                        </select>
                        <span class="error-badge" id="error-count" style="display:none">0 errors</span>
                        <span class="warning-badge" id="warning-count" style="display:none">0 warnings</span>
                    </div>
                    <div class="toolbar-right">
                        <button class="toolbar-btn" id="open-tab-btn" title="Open in New Tab">
                            <i class="fa-solid fa-up-right-from-square"></i>
                            Open in Tab
                        </button>
                        <button class="toolbar-btn" id="save-btn">
                            <i class="fa-solid fa-download"></i>
                            Save
                        </button>
                        <button class="toolbar-btn primary" id="export-btn">
                            <i class="fa-solid fa-file-zipper"></i>
                            Export Project
                        </button>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="editor-tabs" id="editor-tabs">
                    <button class="editor-tab active" data-file="untitled.js">
                        <i class="fa-solid fa-file-code js-icon"></i>
                        untitled.js
                        <span class="close-tab"><i class="fa-solid fa-xmark"></i></span>
                    </button>
                </div>

                <!-- Monaco Editor -->
                <div id="monaco-container"></div>

                <!-- Terminal Panel -->
                <div class="terminal-panel" id="terminal-panel">
                    <div class="resize-handle" id="terminal-resize"></div>
                    <div class="terminal-header" id="terminal-header">
                        <div class="terminal-tabs">
                            <span class="terminal-tab active" data-panel="terminal">
                                <i class="fa-solid fa-terminal"></i> Terminal
                            </span>
                            <span class="terminal-tab" data-panel="problems">
                                <i class="fa-solid fa-triangle-exclamation"></i> Problems
                            </span>
                        </div>
                        <button class="sidebar-btn" id="terminal-toggle">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                    <div class="terminal-content" id="terminal-content">
                        <div class="terminal-line info">> Phantom Code Editor v1.0.0</div>
                        <div class="terminal-line">> Ready to code. Drag files or start typing...</div>
                    </div>
                    <div class="terminal-content problems-content" id="problems-content">
                        <div style="color: var(--text-muted); text-align: center; padding: 20px;">
                            No problems detected. Click "Check Errors" to lint your code.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Monaco Editor CDN -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>

    <script src="../scripts/code.js"></script>

    <script src="../components/footer.js"></script>
</body>

</html>